const canvasCombiner = require('./canvasCombiner')

const layer1 = '[["Layer",{"applyMatrix":true,"selected":true,"children":[["PointText",{"applyMatrix":false,"matrix":[1,0,0,1,20,30],"content":"209 of the 280 segments were removed. Saving 75%"}],["Path",{"applyMatrix":true,"selected":true,"segments":[[[161,623],[0,0],[0,-44.05265],7],[[171,491],[-14.18302,42.54907],[47.141,-141.42301],7],[[496,278],[-143.69793,-3.12387],[39.9706,0.86893],7],[[650,335],[-24.30808,-36.46212],[35.15534,52.73302],7],[[596,480],[30.22403,-37.35555],[-8.60393,10.63407],7],[[566,508],[9.61999,-9.72455],[-81.24806,82.13119],7],[[471,834],[-130.70649,-107.17933],[27.02031,22.15665],7],[[590,842],[-30.15459,4.3078],[104.54626,-14.93518],7],[[814,675],[-50.08357,89.94599],[31.1137,-55.87767],7],[[905,497],[-63.24847,35.8408],[36.80822,-20.85799],7],[[995,514],[-33.81083,-19.86386],[9.46379,5.55998],7],[[1080,562],[-24.91048,-12.79187],[6.41432,3.29384],7],[[1160,585],[-4.33086,16.24072],[23.8849,-89.56836],7],[[966,391],[92.4556,-65.69214],[-49.85824,35.42559],7],[[889,601],[11.31674,-47.96144],[-6.27753,26.60479],7],[[867,680],[17.54172,-20.9645],[-39.00706,46.61819],7],[[741,740],[58.24788,-10.13007],[-37.5186,6.52497],7],[[617,752],[38.14971,8.29342],[-22.87047,-4.97184],7],[[550,731],[18.97882,13.69606],[-40.75457,-29.41051],7],[[378,585],[29.71039,44.32978],[-15.97707,-23.83881],7],[[334,511],[13.55165,25.29641],[-9.02131,-16.83977],7],[[363,460],[-16.86472,4.27728],[36.79519,-9.33211],7],[[514,439],[-48.00556,-8.52435],[39.80963,7.069],7],[[631,471],[-37.73739,-14.51438],[58.49212,22.49697],7],[[787,521],[-66.67236,2.98533],[6.65721,-0.29808],7],[[817,470],[-2.59176,8.53756],[15.98388,-52.65278],7],[[833,309],[5.985,54.72002],[-2.42389,-22.16133],7],[[788,255],[16.01134,13.13751],[-55.11473,-45.22235],7],[[599,187],[75.4623,-13.41552],[-22.95787,4.0814],7],[[511,221],[12.95762,-25.91524],[-28.8634,57.72681],7],[[568,404],[-26.56972,-47.16126],[49.13587,87.21617],7],[[612,619],[21.85372,-98.34173],[-18.18299,81.82348],7],[[382,783],[77.21732,-5.06343],[-40.32221,2.64408],7],[[250,757],[31.99575,31.99575],[-50.04709,-50.04709],7],[[288,652],[-97.66161,-23.43879],[41.19775,9.88746],7],[[398,709],[-33.90357,-24.77569],[15.63298,11.4241],7],[[443,741],[-16.27651,-9.5414],[4.88862,2.86574],7],[[458,749],[-5.12118,-2.42582],[1.53606,0.72761],7],[[463,750],[1.47573,0.84327],[-32.39952,-18.51401],7],[[347,720],[36.85816,1.74133],[-34.64245,-1.63665],7],[[243,717],[34.67514,0.64213],[-1.69938,-0.03147],7],[[238,718],[-1.69967,0],[15.23155,0],7],[[280,700],[-13.80257,6.4412],[0.02377,-0.01109],7],[[289,694],[0,1.40849],[0,-0.40135],7],[[262,675],[1.21439,1.21439],[-19.70712,-19.70712],7],[[228,596],[-6.07234,29.34965],[10.26114,-49.59549],7],[[297,481],[-34.30956,36.85101],[10.02226,-10.76465],7],[[334,448],[-6.37118,12.74237],[0.4714,-0.94281],7],[[331,447],[1.05364,0.03099],[-10.66206,-0.31359],7],[[299,447],[10.66453,0.21329],[-18.25606,-0.36512],7],[[221,431],[-4.36938,10.19521],[11.1344,-25.98026],7],[[302,386],[-4.87784,11.58488],[1.68158,-3.99375],7],[[297,374],[3.52007,2.52723],[-23.29025,-16.7212],7],[[202,329],[15.72182,24.70572],[-2.21945,-3.4877],7],[[206,319],[-2.19888,1.63143],[8.4598,-6.27663],7],[[280,265],[2.18226,8.72905],[-9.36473,-37.45894],7],[[177,213],[10.96656,21.93312],[-1.03171,-2.06342],7],[[236,196],[-31.20152,7.93259],[2.66399,-0.67729],7],[[244,194],[0,2.74874],[0,-1.20185],7],[[241,192],[1.17107,0.27025],[-18.61377,-4.29549],7],[[180,181],[17.09292,8.54646],[-23.87002,-11.93501],7],[[259,168],[-26.55984,2.6071],[45.4918,-4.46545],7],[[396,162],[-45.50059,4.37506],[17.40938,-1.67398],7],[[448,155],[-17.29618,2.59443],[2.71833,-0.40775],7],[[456,153],[-2.60768,0.86923],[1.41421,-0.4714],7],[[460,151],[1.26412,0.79008],[-5.01282,-3.13301],7],[[429,146],[2.76595,0.25145],[-8.32562,-0.75687],7],[[404,144],[8.33871,0.59562],[-0.99746,-0.07125],7],[[401,144],[0,1],[0,-3.07318],7],[[410,142],[-3.06499,0.22427],[18.28583,-1.33799],7],[[464,138],[-18.07722,2.00858],[0,0],7]],"strokeColor":[0,0,0]}]]}]]'
const layer2 = '[["Layer",{"applyMatrix":true,"selected":true,"children":[["Path",{"applyMatrix":true,"segments":[[[295,164],[0,0],[0,57.94242]],[[300,400],[-43.19638,-43.19638],[2.36664,2.36664]],[[319,380],[-0.39567,0.59351],[13.9593,-20.93895]],[[371,315],[-31.78655,0],[1.37437,0]],[375,316],[[366,319],[3,-1],[-12.08442,4.02814]],[[344,345],[-1.59441,-14.34967],[2.38911,21.50198]],[[367,328],[-0.20016,0.66719],[0.78984,-2.63281]],[369,320],[[367,327],[0.4341,-2.38756],[-1.48064,8.14352]],[[377,374],[-17.64602,0],[7.08186,0]],[[406,314],[-2.94251,5.39461],[0.97105,-1.78026]],[[413,309],[-1.92411,-0.64137],[17.22769,5.74256]],[[416,381],[-18.58843,-3.71769],[26.69518,5.33904]],[[452,319],[-7.35765,14.71531],[2.53859,-5.07718]],[[453,336],[-0.60473,-5.64416],[1.1767,10.9825]],[[456,369],[-0.89264,-11.00923],[3.50706,43.25379]],[[404,483],[57.72836,-4.8107],[-1.6938,0.14115]],[[403,478],[-0.22464,1.68476],[1.15889,-8.69171]],[[407,452],[-1.61596,8.61844],[3.36146,-17.92777]],[[443,401],[-11.53809,12.69189],[25.25548,-27.78102]],[[535,357],[-23.64072,50.23652],[3.92118,-8.33251]],[[536,326],[3.38737,9.03299],[-4.55031,-12.13417]],[[509,344],[0.84022,-1.26033],[-12.65037,18.97556]],[[516,409],[-14.47108,-16.27996],[9.54571,10.73892]],[[542,393],[-2.36862,7.69803],[5.03032,-16.34855]],[[553,341],[0,17.63745],[0,-1.15587]],[[551,330],[-1.34585,1.34585],[3.77859,-3.77859]],[[567,331],[-5.33635,-0.28086],[3.23788,0.17041]],[[584,331],[-2.27742,-1.13871],[0.84327,0.42164]],[[582,333],[0.59702,-0.72969],[-6.50368,7.94894]],[[571,359],[0.93623,-10.29858],[-0.45713,5.02841]],[[592,421],[-32.37903,32.37903],[7.91328,-7.91328]],[[606,396],[-4.04062,4.04062],[0,0]]],"strokeColor":[0,0,0]}],["Path",{"applyMatrix":true,"segments":[[[653,407],[0,0],[8.42659,-8.42659]],[[669,374],[-4.42521,10.69425],[34.27902,-82.84097]],[[695,174],[0,86.51987],[0,-17.1492]],[[698,130],[0,15.03203],[0,-2.33333]],[[698,137],[0,-2.33333],[0,8]],[[698,161],[0,-8],[0,14.34268]],[[692,203],[1.9556,-14.08035],[-7.70385,55.46775]],[[690,350],[-6.99052,-55.92413],[1.49563,11.96507]],[[707,406],[-14.77712,-4.92571],[1.14018,0.38006]],[[709,403],[-0.53748,1.07497],[4.19788,-8.39577]],[[717,376],[-2.79983,8.95947],[4.76235,-15.23953]],[[742,317],[-16.83589,8.41794],[2.6757,-1.33785]],[[734,336],[0.87894,-2.05087],[-6.27758,14.64769]],[[732,381],[-8.86206,-14.77009],[12.65531,21.09218]],[[767,341],[-1.2862,1.2862],[1.79505,-1.79505]],[[764,348],[0.89136,-2.37696],[-1.26057,3.36152]],[[760,358],[1.60555,-3.21109],[-4.41182,8.82364]],[[764,395],[-12.72286,-4.24095],[25.19077,8.39692]],[[794,349],[-5.69781,11.39562],[2.49821,-4.99641]],[[801,362],[-2.94939,-2.94939],[2.37532,2.37532]],[[822,353],[-4.1351,2.52701],[5.76867,-3.5253]],[[844,337],[-1.00737,-0.50368],[4.86223,2.43111]],[[859,352],[-4.21571,-3.95223],[52.30571,49.0366]],[[838,361],[-10.32139,51.60696],[5.07918,-25.39589]],[[887,349],[-14.83037,5.39286],[3.52046,-1.28017]],[[901,333],[3.99328,0],[0,0]]],"strokeColor":[0,0,0]}],["Path",{"applyMatrix":true,"selected":true,"segments":[[[632,234],[0,0],[50.68845,25.34423],7],[[784,264],[-57.7244,57.7244],[0,0],7]],"strokeColor":[0,0,0]}]]}]]'
const layer3 = '[["Layer",{"applyMatrix":true,"selected":true,"children":[["Path",{"applyMatrix":true,"segments":[[[492,687],[0,0],[0,8.09778]],[[490,711],[0.66381,-7.96567],[-0.24914,2.98964]],[[490,720],[-3,0],[6.03436,0]],[[515,714],[-6.74771,1.2652],[5.01168,-0.93969]],[[530,711],[-5.07371,0.50737],[0.99504,-0.0995]],[[533,711],[1,0],[0,0]]],"strokeColor":[0,0,0]}],["Path",{"applyMatrix":true,"segments":[[[543,711],[0,0],[0,-11.29313]],[[543,678],[-1.21967,11.58685],[0.09737,-0.92504]],[[545,669],[-1.14297,0],[1.37437,0]],[[546,673],[-0.54139,-1.26324],[1.10735,2.58382]],[[556,705],[4.35056,8.70112],[0,0]]],"strokeColor":[0,0,0]}],["Path",{"applyMatrix":true,"segments":[[[545,697],[0,0],[4,0]],[[557,697],[-4,0],[0,0]]],"strokeColor":[0,0,0]}],["Path",{"applyMatrix":true,"segments":[[[559,676],[0,0],[0,6.05911]],[[573,695],[-4.34455,4.34455],[0,0]]],"strokeColor":[0,0,0]}],["Path",{"applyMatrix":true,"segments":[[[585,681],[0,0],[0,9.26068]],[[571,715],[3.15899,-9.47696],[-0.4714,1.41421]],[569,719],[[573,715],[-1.33333,1.33333],[0,0]]],"strokeColor":[0,0,0]}],["Path",{"applyMatrix":true,"segments":[[[608,685],[0,0],[-5.22033,0]],[[593,692],[0,-7.36014],[0,6.33198]],[[592,715],[-2.00036,-6.00107],[2.29657,6.8897]],[[608,716],[5.24999,5.24999],[0,0]]],"strokeColor":[0,0,0]}],["Path",{"applyMatrix":true,"segments":[[[590,701],[0,0],[5.43244,0]],[[611,700],[-6.25054,0],[0,0]]],"strokeColor":[0,0,0]}],["Path",{"applyMatrix":true,"segments":[[[617,683],[0,0],[-4.84228,9.68457]],[[618,718],[-4.77261,-9.54522],[0.33333,0.66667]],[[617,716],[0.13333,0.73333],[-1.06047,-5.8326]],[[616,699],[0,5.78957],[0,-11.58158]],[[635,681],[-14.91961,-3.7299],[1.64893,0.41223]],[[634,686],[0.63124,-1.57811],[-2.31426,5.78564]],[[624,698],[6.56547,-1.31309],[-0.58725,0.11745]],[[619,700],[-0.87175,-0.87175],[5.07899,5.07899]],[[650,716],[-7.13711,0],[0,0]]],"strokeColor":[0,0,0]}],["Path",{"applyMatrix":true,"selected":true,"segments":[[[694,679],[0,0],[0,-20.75149],7],[[741,676],[-6.14489,-12.28977],[3.93371,7.86741],7],[[711,695],[5.25375,0],[-1.88562,0],7],[[715,691],[-1.81307,0.51802],[5.24342,-1.49812],7],[[730,691],[-5.24318,-1.16515],[12.38159,2.75147],7],[[741,716],[8.01582,-12.02372],[-7.9901,11.98515],7],[[700,728],[0,-4.64813],[0,1.47801],7],[[700,737],[-0.71095,-0.71095],[10.03904,10.03904],7],[[753,723],[-7.6854,7.6854],[21.4335,-21.4335],7],[[747,688],[6.81833,6.81833],[-0.77934,-0.77934],7],[[753,683],[-0.90541,1.50902],[2.07108,-3.4518],7],[[757,663],[4.42923,4.42923],[-37.30969,-37.30969],7],[[697,680],[-49.62758,0],[0,0],7]],"strokeColor":[0,0,0]}]]}]]'
// const Paper = require('paper')

describe('canvasCombiner', () => {
  describe('stitch', () => {
    test('should combine sections into on canvas', () => {
      const result = canvasCombiner.stitch([layer1, layer2, layer3])
      expect(Array.isArray(JSON.parse(`${result}`))).toBe(true)
    })

    // test('difference', () => {
    //
    //   const improvised = [].concat([layer1, layer2, layer3])
    //   expect(JSON.parse(exported)).toBe(improvised)
    // })
  })
  describe('getYpositions', () => {
    test('returns y positions', () => {
      expect(canvasCombiner.getYpositions([828, 353, 90])).toEqual([0, 828, 1181])
    })
  })
})
